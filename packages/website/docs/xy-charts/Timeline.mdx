---
description: Learn how to configure a Timeline chart
---
import React, { useState } from 'react'
import CodeBlock from "@theme/CodeBlock"
import BrowserOnly from "@docusaurus/core/lib/client/exports/BrowserOnly"
import { XYWrapper, XYWrapperWithInput, axis } from '../wrappers/xy-wrapper'
import { PropsTable } from '@site/src/components/PropsTable'
import { generateTimeSeries } from '../utils/data'

export const xAxis = ({
  ...axis('x'),
  props: { type: 'x', tickFormat: Intl.DateTimeFormat.format }
})

export const timelineProps = (n = 5, rows=n) => ({
  name: "Timeline",
  height: 150,
  dataType: 'TimeDataRecord',
  data: generateTimeSeries(n, rows),
  lineDuration: d => d.length,
  lineRow: d => d.type,
  x: d => d.timestamp,
})

export const emptyProps = {
  ...timelineProps(),
  data: Array(4).fill(0).map((_, i) => ({ type: 'a', timestamp: i * 10, length: i % 2 === 1 ? 8 : 0 })),
  height: 50,
}

## Basic Configuration
The _Timeline_ component has been designed to work together with _XY Container_.
The minimal _Timeline_ configuration looks like:

<XYWrapper {...timelineProps(6)} showContext="full"/>

where `TimeDataRecord` has at least the following properties:

```ts
type TimeDataRecord = {
  timestamp: Date; // Position on the X axis. Can be `number` or `Date`
  length: number; // Length of the line in X axis values, i.e. milliseconds if you use `Date`
  type: string; // The row it will be displayed in
}
```

:::note

By default, if the records in your data array contain `length` and `type` properties (as shown above),
_Timeline_ will only need the `x` accessor provided to display the data.
Otherwise, you can explicitly define accessor functions for `lineDuration` and `lineRow`.

The `type` and `length` properties are deprecated in favor of `lineRow` and `lineDuration`, respectively.

:::

## Row Labels
Enable the `showRowLabels` property to display row types along the **vertical** axis. You can control
the label width with `rowLabelWidth` (fixed) and `rowMaxLabelWidth` (maximum) properties.

:::note
The `showLabels`, `labelWidth`, and `maxLabelWidth` properties are deprecated. Use `showRowLabels`,
`rowLabelWidth`, and `rowMaxLabelWidth` instead.
:::

Like other XY components, labeling data along the **horizontal** axis can be accomplished
by adding an _Axis_ component to your container. See following example which displays labeled
_Timeline_ alongside a labeled _X Axis_:

<XYWrapper {...timelineProps()}
  components={[xAxis]}
  declarations={{ tickFormat: 'Intl.DateTimeFormat().format'}}
  showRowLabels
  showContext="container"/>

<br/>

:::caution Note

Since *Timeline* groups vertical data in an ordinal fashion, adding a Y axis here is not recommended.

:::

### Label Text Align
Use the `rowLabelTextAlign` property to control the horizontal alignment of row labels:
`TextAlign.Left`, `TextAlign.Center`, or `TextAlign.Right` (default).

<XYWrapper {...timelineProps(20, 5)} showRowLabels rowLabelTextAlign="left" hideTabLabels/>

### Label Width
Set a fixed label width with `rowLabelWidth` or a maximum width with `rowMaxLabelWidth`.
Labels longer than the specified value will be trimmed.

<XYWrapperWithInput {...timelineProps(20, 5)} showRowLabels property="rowLabelWidth" inputType="range" defaultValue={60}/>

### Label Trim Mode
When labels exceed the available width, they'll be trimmed. Use the `rowLabelTrimMode` property to control
where the trimming occurs: `TrimMode.Start`, `TrimMode.Middle` (default), or `TrimMode.End`.

<XYWrapper {...timelineProps(20, 5)} showRowLabels rowLabelWidth={70} rowLabelTrimMode="end" hideTabLabels/>

### Label Margin
Use the `rowLabelMargin` property to set the spacing (in pixels) between the row labels and the timeline content.

You can also provide a `[left, right]` tuple to control spacing on both sides of the label independently:
- The first value sets the left margin (space from the container edge or row icon to the label)
- The second value sets the right margin (space between the label and the timeline content)

```ts
rowLabelMargin: [10, 5] // 10px left, 5px right
```

<XYWrapperWithInput {...timelineProps(20, 5)} showRowLabels property="rowLabelMargin" inputType="range" defaultValue={5}/>

### Label Style
Use `rowLabelStyle` to apply custom CSS styles to row labels. It accepts an object with CSS property-value pairs
or an accessor function for per-label styling.

```ts
rowLabelStyle: { 'font-weight': 'bold', 'fill': '#333' }
```

### Label Formatter
Use `rowLabelFormatter` to customize the displayed label text. It receives the row key, the row's data items, and the row index.

```ts
rowLabelFormatter: (key: string, items: Datum[], i: number) => `${key} (${items.length})`
```

### Icon
Use the `rowIcon` property to display an icon before each row label. The function receives the row key, items, and index,
and should return a `TimelineRowIcon` object or `undefined`.

```ts
type TimelineRowIcon = {
  href: string;  // SVG icon href (defined in container's svgDefs)
  size: number;
  color: string;
}
```

## Row Configuration
### Alternating row colors
For easier readability, each row's background color alternates among two colors by default. To display a single
background color across all rows, disable the `alternatingRowColors` property:
<XYWrapperWithInput {...timelineProps(20, 5)} property="alternatingRowColors" defaultValue={true} inputType="checkbox"/>

### Row Height
Use the `rowHeight` property to adjust the size of each row.
<XYWrapper {...timelineProps(20, 5)} rowHeight={50} hideTabLabels/>

## Line Configuration
### Line Cap
By default, lines have squared ends. You can give your lines a rounded appearance by setting `lineCap` property to `true`.
<XYWrapper {...timelineProps()} lineCap/>

### Showing empty segments
Set `showEmptySegments` to `true` if you want to display lines that are `undefined` or too small to see.

<XYWrapperWithInput {...emptyProps} lineCap={true} property="showEmptySegments" inputType="checkbox" defaultValue={true}/>

#### Empty segments positioning
When both `showEmptySegments` and `lineCap` are set to `true`, you can control the positioning of small segments using
the `showEmptySegmentsCorrectPosition` property. When set to `true` (default), small segments will be centered at their
actual position. When set to `false`, small segments will be aligned to the left of their position.

<XYWrapperWithInput {...emptyProps} lineCap={true} showEmptySegments={true} property="showEmptySegmentsCorrectPosition" inputType="checkbox" defaultValue={true}/>

### Line Width
You can also change the line thickness with the `lineWidth` property, which determines how much
vertical space each _Timeline_ item occupies.

<XYWrapperWithInput {...timelineProps(3)} height={320} rowHeight={50} property="lineWidth" inputType="range" defaultValue={10}/>

### Line Cursor
Use the `lineCursor` property to set a custom CSS cursor when hovering over a timeline line.

:::note
The `cursor` property is deprecated. Use `lineCursor` instead.
:::

### Line Icons
You can display icons at the start and/or end of each timeline line using SVG symbols defined in the
container's `svgDefs`.

| Property | Description |
|---|---|
| `lineStartIcon` / `lineEndIcon` | SVG icon href accessor |
| `lineStartIconColor` / `lineEndIconColor` | Icon color accessor |
| `lineStartIconSize` / `lineEndIconSize` | Icon size accessor |
| `lineStartIconArrangement` / `lineEndIconArrangement` | Icon positioning relative to the line: `Arrangement.Inside` (default), `Arrangement.Outside`, `Arrangement.Start`, `Arrangement.Middle`, or `Arrangement.End` |

## Arrows
Use the `arrows` property to draw connecting arrows between timeline lines. Each arrow is defined as a `TimelineArrow` object:

```ts
type TimelineArrow = {
  id?: string;
  xSource?: number;            // X position of arrow start (defaults to source line's end)
  xTarget?: number;            // X position of arrow end (defaults to target line's start)
  xSourceOffsetPx?: number;    // Horizontal offset of the source in pixels
  xTargetOffsetPx?: number;    // Horizontal offset of the target in pixels
  lineSourceId: string;        // Id of the source line element
  lineTargetId: string;        // Id of the target line element
  lineSourceMarginPx?: number; // Margin between source line and arrow in pixels
  lineTargetMarginPx?: number; // Margin between target line and arrow in pixels
  arrowHeadLength?: number;    // Arrowhead length in pixels (default: 8)
  arrowHeadWidth?: number;     // Arrowhead width in pixels (default: 6)
}
```

The `lineSourceId` and `lineTargetId` correspond to the values returned by the `id` accessor on your data items.

export const arrowData = Array(7).fill(0).map((_, i) => ({
  id: `item-${i}`,
  timestamp: Date.now() + i * 1000 * 60 * 60 * 24 + Math.random() * 1000 * 60 * 60 * 12,
  length: 1000 * 60 * 60 * 24,
  type: `Task ${i + 1}`,
}))

export const arrowItems = arrowData.slice(0, -1).map((d, i) => ({
  id: `arrow-${i}`,
  xSource: d.timestamp + d.length,
  lineSourceId: d.id,
  lineTargetId: arrowData[i + 1].id,
  lineSourceMarginPx: 2,
  lineTargetMarginPx: 2,
}))

<XYWrapper
  name="Timeline"
  data={arrowData}
  dataType="TimeDataRecord"
  height={255}
  x={d => d.timestamp}
  id={d => d.id}
  lineCap
  rowHeight={35}
  showRowLabels
  arrows={arrowItems}
  declarations={{ arrows: `[{ lineSourceId: 'item-0', lineTargetId: 'item-1', xSource: ... }, ...]` }}
  showContext="minimal"
/>

## Events
### Scrolling
You can provide a callback to the `onScroll` property, which accepts a function of type:

```ts
type onScroll = (n: number) => void
```

where _n_ is equal to the distance scrolled from the top of the timeline (in pixels).

See the following example, where `onScroll` updates the xAxis label:

export function ScrollExample() {
  const [dist, setDist] = React.useState(0)
  return (
    <>
      <XYWrapper {...timelineProps(50, 20)}
        onScroll={setDist}
        showContext="minimal"
        components={[{...xAxis, props: { type: 'x', label: () => `${dist}px from the top`, tickValues: [] }}]}
        declarations={{ onScroll: '(n: number) => setAxisLabel(`${n}px from the top`)'}}
        />
    </>
  )
}

<ScrollExample/>

### Custom cursor for hover events
You can set a custom cursor when hovering over a line using the `lineCursor` property. It'll only be active if you've defined events for `[Timeline.selectors.line]`:
<BrowserOnly>
{() => {
  const { Timeline } = require('@unovis/ts')
  return <XYWrapper
      {...timelineProps(20, 5)}
      showContext="minimal"
      declarations={{
        events:
  `{
    [Timeline.selectors.line]: {
        click: (d) => { console.log(d) }
    }
  }`
      }}
      events={{
        [Timeline.selectors.line]: {
            click: (d) => { console.log(d) }
        },
      }}
      lineCursor="cell"
    />
  }
}
</BrowserOnly>

### More Events
```ts
import { Timeline } from '@unovis/ts'

const events = {
  [Timeline.selectors.background]: {
    wheel: () => { ... },
  },
  [Timeline.selectors.line]: {
    click: () => { ... },
  }
  [Timeline.selectors.label]: {
    mouseover: () => { ... }
  }
}
```

## CSS Variables
The _Timeline_ component supports additional styling via CSS variables:


<details open>
  <summary>All supported CSS variables</summary>
  <CodeBlock language="css">{
`--vis-timeline-row-even-fill-color: #FFFFFF;
--vis-timeline-row-odd-fill-color: #F7FAFC;
--vis-timeline-row-background-opacity: 1;
--vis-timeline-scrollbar-background-color: #E6E9F3;
--vis-timeline-scrollbar-color: #9EA7B8;
 
--vis-timeline-label-font-size: 12px;
--vis-timeline-label-color: #6C778C;
 
--vis-timeline-cursor: default;
--vis-timeline-line-color: var(--vis-color-main);
--vis-timeline-line-stroke-width: 0;
 
/* The line stroke color variable is not defined by default */
/* to allow it to fallback to the corresponding row background color */
/* --vis-timeline-line-stroke-color: none; */
 
/* Dark Theme */
--vis-dark-timeline-row-even-fill-color: #292B34;
--vis-dark-timeline-row-odd-fill-color: #333742;
--vis-dark-timeline-scrollbar-background-color: #292B34;
--vis-dark-timeline-scrollbar-color: #6C778C;
--vis-dark-timeline-label-color: #EFF5F8;`}
  </CodeBlock>
</details>

## Component Props
<PropsTable name="VisTimeline"/>
