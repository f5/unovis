import { moduleMetadata, componentWrapperDecorator } from '@storybook/angular'
import { Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { VisXYContainerModule, VisAxisModule, VisStackedBarModule } from 'src/public-api'

import { VisStackedBarComponent } from 'src/components/stacked-bar/stacked-bar.component'

import { xyChartContentWrapper } from '../../utils/content-wrappers'
import { baseConfig, getColor, minBarHeightExampleData } from './xy-stacked-bar.config'

<Meta
  title="XY Charts/Stacked Bar"
  component={VisStackedBarComponent}
  decorators={[
    moduleMetadata({ imports: [VisStackedBarModule, VisXYContainerModule, VisAxisModule] }),
    componentWrapperDecorator(xyChartContentWrapper)
  ]}
/>

<style>{``}</style>

# Stacked Bar
### Basic configuration
The Stacked Bar component has been designed to work together with `<vis-xy-container>`. The minimal Stacked Bar configuration looks like:
```angular2html
<vis-xy-container [data]="dataArray">
  <vis-stacked-bar [x]="xAccessor" [y]="yAccessor"></vis-stacked-bar>
</vis-xy-container>
```
where `data: DataRecord[] = [{x: 0, y: 1}, ...]`, `xAccessor = (d: DataRecord) => d.x` and `yAccessor = (d: DataRecord) => d.y`.
<Story name="Simple Area">
  {{
    props: {
      ...baseConfig(),
      storyHideAxes: true,
      storyHeight: 150,
    },
  }}
</Story>

### Color 
Component color accessor function. Default: d => d.color
```angular2html
  <vis-stacked-bar ... [color]="getColor""></vis-stacked-bar>
```
<Story name="Color">
  {{
    props:{
      ...baseConfig(),
      color: getColor
    }
  }}
</Story>

### Cursor
Configurable bar cursor [cursor CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor) when hovering over. Default: `null` . 
```angular2html
  <vis-stacked-bar ... [cursor]="pointer"></vis-stacked-bar>
```
<Story name="Cursor">
  {{
    props:{
      ...baseConfig(),
      cursor: 'pointer'
    }
  }}
</Story>


### Bar Width
Specify the bar's width in pixels using the barWidth property:

```angular2html
  <vis-stacked-bar ... [barWidth]="3"></vis-stacked-bar>
```
<Story name="Bar Width">
  {{
    props: {
       ...baseConfig(),
      barWidth: 3
    }
  }}
</Story>

### Rounded Corners
Rounded corners for top bars. Boolean or number (to set the radius in pixels). Default: `true` 

```angular2html
  <vis-stacked-bar ... [roundedCorners]="false"></vis-stacked-bar>
```
<Story name ="Rounded Corners">
  {{
    props: {
      ...baseConfig(),
      roundedCorners: true
    }
  }}
</Story>

### Limiting Maximum Bar Width
Maximum bar width for dynamic sizing. Default: `undefined`
```angular2html
  <vis-stacked-bar ... [barMaxWidth]="10"></vis-stacked-bar>
```
<Story name="Limiting Maximum Bar Width">
  {{
    props: {
      ...baseConfig(),
      storyHideAxes: true,
      storyHeight: 150,
      barMaxWidth: 10,
    },
  }}
</Story>

### Limiting Minimum Bar Height
Sets the minimum bar height to 1 pixel for better visibility of small values. Default: `false`.
```angular2html
  <vis-stacked-bar ... [barMinHeight]="true"></vis-stacked-bar>
```
<Story name="Limiting Minimum Bar Height">
  {{
    props: {
      ...baseConfig(),
      data: minBarHeightExampleData,
      storyHideAxes: true,
      storyHeight: 150,
      barMinHeight: true
    },
  }}
</Story>

### Bar Minimum Height
Sets the minimum bar height to 1 pixel for better visibility of small values. Default: false

```angular2html
  <vis-stacked-bar ... [barMinHeight]="true"></vis-stacked-bar>
```
<Story name ="Bar Minimum Height"> 
  {{
    props: {
      ...baseConfig(),
      minBarHeight: true
    }
  }}
</Story>

### Bar Min Height Zero value
Sets the minimum bar height to 1 pixel for better visibility of small values. Default: `false`
```angular2html
  <vis-stacked-bar ... [barMinHeightZeroValue]="true"></vis-stacked-bar>
```
<Story name="Bar Min Height Zero value">
  {{
    props: {
      ...baseConfig(),
      barMinHeightZeroValue: true,
      data: minBarHeightExampleData
    }
  }}
</Story>



### Data Step 
Expected step between the bars in the X axis units.
  Needed to correctly calculate the width of the bars when there are gaps in the data.
  Default: `undefined`

```angular2html
  <vis-stacked-bar ... [dataStep]="1"></vis-stacked-bar>
```

<Story name="Data Step">
  {{
    props:{
      ...baseConfig(),
      dataStep:1
    }
  }}
</Story>

### Bar Padding
Fractional padding between the bars in the range of [0,1). Default: `0`
```angular2html
  <vis-stacked-bar ... [barPadding]="1"></vis-stacked-bar>
```
<Story name="Bar Padding">
  {{
    props:{
      ...baseConfig(),
      barPadding:0.5
    }
  }}
</Story>

### Component Inputs

<ArgsTable of={VisStackedBarComponent} />

