import { moduleMetadata, componentWrapperDecorator } from '@storybook/angular'
import { Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { VisXYContainerModule, VisAxisModule, VisStackedBarModule } from 'src/public-api'

import { VisStackedBarComponent } from 'src/components/stacked-bar/stacked-bar.component'

import { xyChartContentWrapper } from '../../utils/content-wrappers'
import { baseConfig, getColor, minBarHeightExampleData } from './xy-stacked-bar.config'

<Meta
  title="XY Charts/Stacked Bar"
  component={VisStackedBarComponent}
  decorators={[
    moduleMetadata({ imports: [VisStackedBarModule, VisXYContainerModule, VisAxisModule] }),
    componentWrapperDecorator(xyChartContentWrapper)
  ]}
/>

<style>{``}</style>

# Stacked Bar
### Basic configuration
The Stacked Bar component has been designed to work together with `<vis-xy-container>`. The minimal Stacked Bar configuration looks like:
```angular2html
<vis-xy-container [data]="dataArray">
  <vis-stacked-bar [x]="xAccessor" [y]="yAccessor"></vis-stacked-bar>
</vis-xy-container>
```
where `data: DataRecord[] = [{x: 0, y: 1}, ...]`, `xAccessor = (d: DataRecord) => d.x` and `yAccessor = (d: DataRecord) => d.y`.
<Story name="Simple Stacked Bar">
  {{
    props: {
      ...baseConfig(),
      storyHeight: 150,
    },
  }}
</Story>

### Bar Width
Specify the bar's width in pixels using the `barWidth` property:
```angular2html
  <vis-stacked-bar ... [barWidth]="3"></vis-stacked-bar>
```
<Story name="Bar Width">
  {{
    props: {
       ...baseConfig(),
      barWidth: 3
    }
  }}
</Story>

### Limiting Maximum Bar Width
Set the maximum bar's width. Default value is: `undefined`
```angular2html
  <vis-stacked-bar ... [barMaxWidth]="10"></vis-stacked-bar>
```
<Story name="Limiting Maximum Bar Width">
  {{
    props: {
      ...baseConfig(),
      storyHeight: 150,
      barMaxWidth: 10,
    },
  }}
</Story>

### Limiting Minimum Bar Height
Set the minimum bar height to 1 pixel for better visibility of small values using the `barMinHeight` property. Default: `false`.
```angular2html
  <vis-stacked-bar ... [barMinHeight]="true"></vis-stacked-bar>
```
##### Limiting Minimum Bar Height: true
<Story name="Limiting Minimum Bar Height: true">
  {{
    props: {
      ...baseConfig(),
      data: minBarHeightExampleData,
      storyHeight: 150,
      barMinHeight: true
    },
  }}
</Story>

##### Limiting Minimum Bar Height: false
<Story name="Limiting Minimum Bar Height: false">
  {{
    props: {
      ...baseConfig(),
      data: minBarHeightExampleData,
      storyHeight: 150,
      barMinHeight: false
    },
  }}
</Story>

### Bar Min Height Zero value
Sets the minimum bar height to 1 pixel for better visibility of small values. Default: `false`
```angular2html
  <vis-stacked-bar ... [barMinHeightZeroValue]="true"></vis-stacked-bar>
```
<Story name="Bar Min Height Zero value">
  {{
    props: {
      ...baseConfig(),
      barMinHeightZeroValue: false,
      data: minBarHeightExampleData
    }
  }}
</Story>

### Data Step 
Set the expected step between the bars in the X axis units.

```angular2html
  <vis-stacked-bar ... [dataStep]="0.5"></vis-stacked-bar>
```
<Story name="Data Step">
  {{
    props:{
      ...baseConfig(),
      dataStep:0.5
    }
  }}
</Story>

### Bar Padding
Set the `barPadding` property to specify how much of the available sector should be empty. In the range of [0,1). Default: `0`
```angular2html
  <vis-stacked-bar ... [barPadding]="1"></vis-stacked-bar>
```
##### Bar Padding: 0
<Story name="Bar Padding: 0">
  {{
    props:{
      ...baseConfig(),
      barPadding:0
    }
  }}
</Story>

##### Bar Padding: 1
<Story name="Bar Padding: 1">
  {{
    props:{
      ...baseConfig(),
      barPadding:1
    }
  }}
</Story>

### Rounded Corners
Using the `roundedCorners` property, you can modernize your UI by applying rounded corners to the stacked bar.
```angular2html
  <vis-stacked-bar ... [roundedCorners]="true"></vis-stacked-bar>
```
##### RoundedCorners: true
<Story name ="Rounded Corners: true">
  {{
    props: {
      ...baseConfig(),
      roundedCorners: true
    }
  }}
</Story>

##### RoundedCorners: false
<Story name ="Rounded Corners: false">
  {{
    props: {
      ...baseConfig(),
      roundedCorners: false
    }
  }}
</Story>

### Color 
Set the color of the line by assigning the `color` property to a hex string and/or by assigning the `color` property to a function: ` getColor = (d: DataRecord, i: number): string => d.y > 7 ? '#FF4F4E' : null`
```angular2html
  <vis-stacked-bar ... [color]="getColor""></vis-stacked-bar>
```
<Story name="Color">
  {{
    props:{
      ...baseConfig(),
      color: getColor
    }
  }}
</Story>

### Cursor
Specify the type of cursor when hovering over. Configurable bar cursor [cursor CSS property](https://developer.mozilla.org/en-US/docs/Web/CSS/cursor). Default: `null` . 
```angular2html
  <vis-stacked-bar ... [cursor]="pointer"></vis-stacked-bar>
```
<Story name="Cursor">
  {{
    props:{
      ...baseConfig(),
      cursor: 'pointer'
    }
  }}
</Story>

### Stacked Bar with Axes 
You can add axes using the `storyHideAxes` property:
```angular2html
  <vis-stacked-bar ... [storyHideAxes]="true"></vis-stacked-bar>
```
##### Stacked Bar with Axes: true
<Story name="Stacked bar with Axes: true">
  {{
    props: {
      ...baseConfig(),
      storyHeight: 200,
      storyHideAxes: true
    },
  }}
</Story>

##### Stacked Bar with Axes: false
<Story name="Stacked bar with Axes: false">
  {{
    props: {
      ...baseConfig(),
      storyHeight: 200,
      storyHideAxes: false
    },
  }}
</Story>

### Events
For further customization, the Stacked Bar component supports the following JavaScript events: `Mouse events` and `Touch events`. A list of JavaScript events can be found [here](https://developer.mozilla.org/en-US/docs/Web/API/Element#mouse_events).
```javascript
// In the component file:
import { StackedBar } from '@volterra/vis`
...
events = {
        [StackedBar.selectors.bar]: {
          mouseover: (data: DataRecord[]) => {},
        ...
        },
        [StackedBar.selectors.barGroup]: {},

}

// In the template file:
<vis-stacked-bar ... events="events"></vis-stacked-bar>
```

### Component Inputs
<ArgsTable of={VisStackedBarComponent} />

